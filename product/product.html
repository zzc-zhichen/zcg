<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport"
	      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>商品管理</title>
	<link rel="stylesheet" href="../css/bootstrap/bootstrap.min.css">
	<link rel="stylesheet" href="../css/bootstrap-table/bootstrap-table.min.css">
	<link rel="stylesheet" href="../css/reset.css">
	<link rel="stylesheet" href="../css/common.css">
	<link rel="stylesheet" href="../css/iconfont.css">
	<link rel="stylesheet" href="../css/product.css">
</head>

<body>
<nav>
	<div class="nav">
	
	</div>
	<div class="admin">
		<i class="icon-ren"></i>
		<span class="username">张三</span>
		<i class="icon-shezhi shezhi"></i>
		<div class="edit">
			<ul class="edit-list">
				<li>关于中藏宫</li>
				<li>修改密码</li>
				<li>退出</li>
			</ul>
		</div>
	</div>
</nav>

<!-- 左侧导航 -->
<div class="left-nav" id="nav">
	<div class="logo-title">
		<img class="radius-circle rotate-hover" alt="logo" src="../images/logo.png">
	</div>
	<ul id="accordion" class="accordion">
		<li>
			<div class="link">
				<i class="icon-ren"></i>
				<span class="icon-tubiao11"></span>
				<strong>用户管理</strong>
				<span class="icon-xia"></span>
			</div>
			<ul class="submenu">
				<li><a href="javascript:;">查看</a></li>
			</ul>
		</li>
		<li>
			<div class="link">
				<i class="icon-cangku"></i>
				<span class="icon-tubiao11"></span>
				<strong>仓库管理</strong>
				<span class="icon-xia"></span>
			</div>
			<ul class="submenu">
				<li><a href="/store/store.html">仓库列表</a></li>
				<li><a href="/store/addstore.html">添加仓库</a></li>
			</ul>
		</li>
		<li>
			<div class="link">
				<i class="icon-shangpin"></i>
				<span class="icon-tubiao11"></span>
				<strong>商品管理</strong>
				<span class="icon-xia"></span>
			</div>
			<ul class="submenu">
				<li><a href="/product/product.html">所有商品</a></li>
				<li><a href="/product/add-product.html">添加单品</a></li>
				<li><a href="javascript:;">添加套装</a></li>
				<li><a href="javascript:;">添加周期商品</a></li>
			</ul>
		</li>
		<li>
			<div class="link">
				<i class="icon-xiaoshou"></i>
				<span class="icon-tubiao11"></span>
				<strong>销售管理</strong>
				<span class="icon-xia"></span>
			</div>
			<ul class="submenu">
				<li><a href="javascript:;">待售订单</a></li>
				<li><a href="javascript:;">售中订单</a></li>
				<li><a href="javascript:;">已售订单</a></li>
			</ul>
		</li>
		<li>
			<div class="link">
				<i class="icon-dingdan"></i>
				<span class="icon-tubiao11"></span>
				<strong>订单管理</strong>
				<span class="icon-xia"></span>
			</div>
			<ul class="submenu">
				<li><a href="javascript:;">订单详情</a></li>
			</ul>
		</li>
	</ul>
</div>

<div class="content">
	<div class="seach">
		商品编号<input id="seach_id" type="text"> 商品名称
		<input id="seach_name" type="text">
		<button id="seach_sub">搜索</button>
	</div>
	
	
	<div class="add">
		<a href="/product/add-product.html"><i class="icon-iconjia"></i>添加单品</a>
		<a href="#"><i class="icon-iconjia"></i>添加套装</a>
		<a href="#"><i class="icon-iconjia"></i>添加周期</a>
	</div>
	<div class="table-responsive" style="margin: 0 auto;">
		<div class="table">
			<div class="thead">
				<ul class="clearfix">
					<li>商品编号</li>
					<li>商品名称</li>
					<li>商品类型</li>
					<li>商品材质</li>
					<li>原价</li>
					<li>销售价</li>
					<li>所属仓库</li>
					<li>库存</li>
					<li>颜色</li>
					<li>尺寸</li>
					<li>商品描述</li>
					<li>操作</li>
				</ul>
			</div>
			<div class="tbody" id="tbody">
				<script type="text/html" id="product_list">
					{{each result as value}}
					<ul class="clearfix">
						<li>{{value.id}}</li>
						<li>{{value.name}}</li>
						<li>{{value.sale_type}}</li>
						<li>{{value.type}}</li>
						<li>{{value.orig_price}}</li>
						<li>{{value.pref_price}}</li>
						<li>{{value.r_name}}</li>
						<li>{{value.stock}}</li>
						<li>{{value.color}}</li>
						<li>{{value.size}}</li>
						<li>{{value.p_desc}}</li>
						<li>
							<a href="javascript:;"><i class="icon iconfont-chakan"></i></a>
							<a href="javascript:;"><i class="icon iconfont-bianji edit"></i></a>
						</li>
					</ul>
					{{/each}}
				</script>
			</div>
		</div>
	</div>
	
	<div class="pageContainer">
		<div class="main">
			<div class="page" id="page">
			
			</div>
		</div>
	</div>
	
	
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
						aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title" id="myModalLabel">编辑商品</h4>
				</div>
				<div class="modal-body" id="table">
					<form id="testform">
						<div class="form-group">
							<label for="product">仓库名称</label>
							<input class="form-control" id="product">
						</div>
						<div class="form-group">
							<label for="stock">备注</label>
							<input class="form-control" id="stock">
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					<button type="button" class="btn btn-primary" data-dismiss="modal" id="button">保存</button>
				</div>
			</div>
		</div>
	</div>
</div>


<script src="../lib/jquery.min.js"></script>
<script src="../lib/bootstrap.min.js"></script>
<script src="../lib/paging.js"></script>
<script src="../lib/template-web.js"></script>
<script src="../js/common.js"></script>

<script>
	$(function () {
		$("#headingTwo").removeClass("collapsed").attr("aria-expanded", true);
		$("#collapseTwo").addClass("in");
		var pageNo = GetQueryString('pageNo') || 1;
		var name = GetQueryString('name') || 1;
		if (!/name=/.test(location.search)) {
			$.ajax({
				url: "http://172.168.1.61:8080/ProductMaven/product/search_product",
				dataType: 'json',
				type: 'get',
				data: {
					pageSize: 10,
					pageNo: pageNo
				},
				success: function (data) {
					var data1 = data.result;
					var html = template('product_list', {
						result: data1.listProduct
					});
					$('#tbody').html(html);
					console.log(data1.listProduct);
					//分页
					$("#page").paging({
						totalPage: data1.pageController.totalPages,
						pageNo: pageNo,
						callback: function (num) {
							console.log(num)
						}
					})
				}
			});
		} else {
			$.ajax({
				url: "http://172.168.1.61:8080/ProductMaven/product/search_product ",
				dataType: 'json',
				type: 'get',
				data: {
					pageSize: 10,
					pageNo: pageNo,
					name: name
				},
				success: function (data) {
					var data1 = data.result;
					var html = template('product_list', {
						result: data1.listProduct
					});
					$('#tbody').html(html);
					$("#seach_name").val(name);
					//分页
					$("#page").paging({
						totalPage: data1.pageController.totalPages,
						pageNo: pageNo,
						callback: function (num) {
						
						}
					})
				}
			});
		}
		$("#seach_sub").on("click", function () {
			$.ajax({
				url: "http://172.168.1.61:8080/ProductMaven/product/search_product ",
				dataType: 'json',
				type: 'get',
				data: {
					pageSize: 10,
					pageNo: 1,
					id: $("#seach_id").val(),
					name: $("#seach_name").val()
				},
				success: function (data) {
					var data = data.result;
					if (data.listProduct.length) {
						var html = template('product_list', {
							result: data.listProduct
						});
						$('#tbody').html(html);
						$("#seach_name").val($("#seach_name").val());
						console.log($("#seach_name"));
						var parm;
						if ($("#seach_id").val() && $("#seach_name").val()) {
							parm = "id=" + $("#seach_id").val();
						} else if ($("#seach_id").val() && !$("#seach_name").val()) {
							parm = "id=" + $("#seach_id").val() + "&pageNo=1";
						} else if (!$("#seach_id").val() && $("#seach_name").val()) {
							parm = "name=" + $("#seach_name").val() + "&pageNo=1";
						}
						setPageParam(parm);
						var locahref = location.href;
						//分页
						$("#page").paging({
							totalPage: data.pageController.totalPages,
							pageNo: 1,
							totalHref: locahref,
							callback: function (num) {
								//                                console.log(num)
							}
						})
					} else {
						alert(1);
						$(".son_main").html('<div>无此仓库</div>');
					}
					
				}
			});
		});
		$('.tbody').on('click', '.edit', function () {
			var id = $(this).closest('ul').children().eq(0).text();
			window.location.href = '/product/edit-product.html?product_id=' + id;
		})
	})
</script>
</body>

</html>